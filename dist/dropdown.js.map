{"version":3,"sources":["dropdown.js"],"names":["Dropdown","open","active","_go","parentElement","ul","classList","remove","_activeClassName","_openClassName","add","_closeRelated","contains","_subnavClassName","_openNested","querySelector","click","dismiss","subnav","querySelectorAll","forEach","rect","getBoundingClientRect","ulRect","right","width","window","innerWidth","style","left","_nestedXPos","top","height","innerHeight","bottom","_nestedYPos","navList","options","bind","_keyboardNavigation","logger","console","log","_items","_createList","_baseClassName","domcontext","context","document","body","keyPrefix","createElement","addEventListener","e","key","target","getAttribute","li","navElt","disabled","label","preventDefault","stopPropagation","children","action","location","href","call","idx","hasOwnProperty","Error","setAttribute","divider","_disabledClassName","_dividerClassName","innerText","icon","backgroundImage","iconClass","span","className","insertBefore","firstChild","clearTimeout","timeout","setTimeout","appendChild","elt","dirUp","getNext","next","previousElementSibling","nextElementSibling","length","keyCode","_keyboardHandlers","removeEventListener","evt","undefined","clientX","clientY","pageXOffset","pageYOffset","autoExpandDir","_updateLabels"],"mappings":"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","sourcesContent":["/**\r\n * Class representing a dropdown\r\n */\r\nclass Dropdown {\r\n    // General documentation of the types\r\n    /**\r\n     * @typedef {Object} Dropdown~NavDivider\r\n     * This is the structure of a navigation divider. It is just like the NavItem with no label or action.\r\n     * @property {string}  [key] - A unique key for this item. It will be auto generated if not supplied\r\n     */\r\n\r\n    /**\r\n     * @typedef {Object} Dropdown~NavItem\r\n     * This is the structure of a navigation item\r\n     * @property {string|function} label    - The label which is used in the menu. If it is a function it will be called\r\n     *                                        every time the menu is opened and set the label to the return value of\r\n     *                                        this function. The <code>this</code> object of the function is the\r\n     *                                        Dropdown instance itself unless otherwise bound.\r\n     * @property {string}  [icon]           - An icon to be used. This needs to be a path to a valid css\r\n     *                                        background-image string.\r\n     * @property {string}  [key]            - A unique key for this item. It will be auto generated if not supplied\r\n     * @property {boolean} [disabled=false] - If this is true the item is disabled. When disabled we will not navigate\r\n     *                                        according to the action parameter or run the action callback.\r\n     * @property {(string|Dropdown~actionCallback)} action - What to do when we select this nav item. If this is a\r\n     *                                                       string we will navigate like an &lt;a&gt; tag\r\n     */\r\n\r\n    /**\r\n     * @typedef {Object} Dropdown~NavMenu\r\n     * This is the structure of a navigation submenu\r\n     * @property {string} label             - The label which is used in the menu\r\n     * @property {string} [icon]            - An icon to be used. This needs to be a path to a valid css\r\n     *                                        background-image string.\r\n     * @property {string}  [key]            - A unique key for this item. It will be auto generated if not supplied\r\n     * @property {boolean} [disabled=false] - If this is true the item is disabled. When disabled it will not be\r\n     *                                        expanded\r\n     * @property {Array<Dropdown~NavItem|Dropdown~NavMenu|Dropdown~NavDivider>} children - The children of this menu\r\n     */\r\n\r\n    /**\r\n     * The action callback. The <code>this</code> context is the instance of the dropdown itself unless otherwise bound.\r\n     * @callback Dropdown~actionCallback\r\n     * @param {Event} event - This is the event (either click or keypress) which triggered this handler\r\n     */\r\n\r\n    /**\r\n     * @typedef {Object} Dropdown~Options\r\n     * This is the structure of the options object\r\n     * @property {Dropdown~logger} [logger=console.log] - The logger to use\r\n     * @property {Element} [element=document.body] - The element to attach the dropdown to\r\n     */\r\n\r\n    /**\r\n     * The logging function. Use this if you want to expose internal logging information.\r\n     * @callback Dropdown~logger\r\n     * @param {...*} logItems - This should work similarly to how <code>console.log</code> uses multiple parameters\r\n     */\r\n\r\n    // Private members\r\n    /**\r\n     * Base class name\r\n     *\r\n     * @private\r\n     */\r\n    static get _baseClassName() { return 'dropdown'; }\r\n\r\n    /**\r\n     * Class name of a subnav\r\n     *\r\n     * @private\r\n     */\r\n    static get _subnavClassName() { return 'subnav'; }\r\n\r\n    /**\r\n     * Class name of an open subnav\r\n     *\r\n     * @private\r\n     */\r\n    static get _openClassName() { return 'open';   }\r\n\r\n    /**\r\n     * Class name of a divider\r\n     *\r\n     * @private\r\n     */\r\n    static get _dividerClassName() { return 'divider';   }\r\n\r\n    /*\r\n     * Class name of an active item\r\n     *\r\n     * @private\r\n     */\r\n    static get _activeClassName() { return 'active'; }\r\n\r\n    /**\r\n     * Class name of a disabled item\r\n     *\r\n     * @private\r\n     */\r\n    static get _disabledClassName() { return 'disabled'; }\r\n\r\n    /**\r\n     * X-position (either positive or negative dependeing on space available) of a submenu. Relative to the parent item.\r\n     *\r\n     * @private\r\n     */\r\n    static get _nestedXPos() { return '95%';    }\r\n\r\n    /**\r\n     * Y-position (either positive or negative depending on space available) of a submenu. Relative to the parent item.\r\n     *\r\n     * @private\r\n     */\r\n    static get _nestedYPos() { return '-0.2em'; }\r\n\r\n    // Private static methods\r\n    /**\r\n     * A helper function to close all submenus on a given level.\r\n     *\r\n     * @private\r\n     *\r\n     * @param {Element} subnav - An element on the level we want to close all the open subnavs\r\n     */\r\n    static _closeRelated(subnav) {\r\n        subnav.parentElement.querySelectorAll(`.${Dropdown._openClassName}`).forEach(subnav => {\r\n            subnav.classList.remove(Dropdown._openClassName);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * A helper function to open a specific submenu\r\n     *\r\n     * @private\r\n     *\r\n     * @param {Element} subnav - The element of the subnav item we want to open\r\n     */\r\n    static _openNested(subnav) {\r\n        Dropdown._closeRelated(subnav);\r\n        subnav.classList.add(Dropdown._openClassName);\r\n        const ul = subnav.querySelector('ul');\r\n        const rect = subnav.getBoundingClientRect();\r\n        const ulRect = ul.getBoundingClientRect();\r\n\r\n        if((rect.right + ulRect.width) > window.innerWidth) {\r\n            ul.style.left = '';\r\n            ul.style.right = Dropdown._nestedXPos;\r\n        } else {\r\n            ul.style.right = '';\r\n            ul.style.left = Dropdown._nestedXPos;\r\n        }\r\n        if((rect.top + ulRect.height) > window.innerHeight) {\r\n            ul.style.top = '';\r\n            ul.style.bottom = Dropdown._nestedYPos;\r\n        } else {\r\n            ul.style.bottom = '';\r\n            ul.style.top = Dropdown._nestedYPos;\r\n        }\r\n    }\r\n\r\n    get _keyboardHandlers() {\r\n        return {\r\n            // up arrow\r\n            '38': (open, active) => this._go(true, open, active), \r\n\r\n            // down arrow\r\n            '40': (open, active) => this._go(false, open, active),\r\n\r\n            // left arrow\r\n            '37': (active, open) => {\r\n                if(active && active.parentElement !== this.ul && active.parentElement.parentElement !== this.ul) {\r\n                    active.classList.remove(Dropdown._activeClassName);\r\n                    active.parentElement.parentElement.classList.remove(Dropdown._openClassName);\r\n                    active.parentElement.parentElement.classList.add(Dropdown._activeClassName);\r\n                } else if(open && open !== this.ul) {\r\n                    Dropdown._closeRelated(open.parentElement);\r\n                }\r\n            },\r\n\r\n            // right arrow\r\n            '39': active => {\r\n                if(active && active.classList.contains(Dropdown._subnavClassName)) {\r\n                    Dropdown._openNested(active);\r\n                    active.querySelector('li').classList.add(Dropdown._activeClassName);\r\n                }\r\n            },\r\n\r\n            // enter\r\n            '13': active => active && active.click(), \r\n\r\n            // escape\r\n            '27': this.dismiss, \r\n        };\r\n    }\r\n\r\n\r\n    /**\r\n     * @constructor\r\n     * @param {Array<Dropdown~NavItem|Dropdown~NavMenu|Dropdown~NavDivider>} navList - Object representation of the context menu.\r\n     * @param {Dropdown~Options} options - Optional parameters for this instance\r\n     */\r\n    constructor(navList, options = {}) { \r\n        this.dismiss = this.dismiss.bind(this);\r\n        this._keyboardNavigation = this._keyboardNavigation.bind(this);\r\n        \r\n        this.logger = options.logger ? options.logger : console.log.bind(console); // eslint-disable-line no-console\r\n        this.navList = navList;\r\n\r\n        this._items = {};\r\n        this.ul = this._createList(navList, 'item');\r\n        this.ul.classList.add(Dropdown._baseClassName);\r\n\r\n        this.domcontext = options.context || document.body;\r\n    }\r\n\r\n    /**\r\n     * A helper function to create the dom structure of the dropdown\r\n     *\r\n     * @private \r\n     *\r\n     * @param navList {Array<Dropdown~NavItem|Dropdown~NavMenu|Dropdown~NavDivider>} The object representation of the context menu\r\n     */\r\n    _createList(navList, keyPrefix) {\r\n        const ul = document.createElement('ul');\r\n\r\n        ul.addEventListener('click', e => {\r\n            const key = e.target.getAttribute('data-key');\r\n            if(!key || !this._items[key]) {\r\n                return;\r\n            }\r\n            const {li, navElt} = this._items[key];\r\n\r\n            if(navElt.disabled || !navElt.label) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                return;\r\n            }\r\n\r\n            if(navElt.children) {\r\n                Dropdown._openNested(li);\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            } else if(typeof(navElt.action) === 'string') {\r\n                window.location.href = navElt.action;\r\n            } else if(typeof(navElt.action) === 'function') {\r\n                navElt.action.call(this, e);\r\n            }\r\n        });\r\n\r\n        navList.forEach((navElt, idx) => {\r\n            const li = document.createElement('li');\r\n\r\n            navElt.key = navElt.key ? navElt.key : `${keyPrefix}-${idx}`;\r\n            if(this._items.hasOwnProperty(navElt.key)) {\r\n                throw new Error('Got duplicate key');\r\n            } else {\r\n                this._items[navElt.key] = { navElt, li };\r\n            }\r\n            li.setAttribute('data-key', navElt.key);\r\n\r\n            const divider = typeof navElt.label === 'undefined';\r\n            if(navElt.disabled || divider) {\r\n                li.classList.add(Dropdown._disabledClassName);\r\n            }\r\n            if(divider) { // divider\r\n                li.classList.add(Dropdown._dividerClassName);\r\n            } else if(typeof navElt.label === 'function') {\r\n                li.innerText = navElt.label.call(this);\r\n            } else {\r\n                li.innerText = navElt.label;\r\n            }\r\n\r\n            if(navElt.icon) {\r\n                li.style.backgroundImage = navElt.icon;\r\n            } else if(navElt.iconClass) {\r\n                const span = document.createElement('span');\r\n                span.className = `${navElt.iconClass} icon`;\r\n                li.insertBefore(span, li.firstChild);\r\n            }\r\n\r\n            li.addEventListener('mouseleave', e => {\r\n                this.logger('mouseleave', e);\r\n                clearTimeout(this.timeout);\r\n\r\n                e.target.classList.remove(Dropdown._activeClassName);\r\n            });\r\n            li.addEventListener('mouseenter', e => {\r\n                this.logger('mouseenter', e);\r\n                clearTimeout(this.timeout);\r\n\r\n                if(navElt.disabled || divider) {\r\n                    this.timeout = setTimeout(Dropdown._closeRelated.bind(null, e.target), 500);\r\n                    return;\r\n                }\r\n\r\n                e.target.classList.add(Dropdown._activeClassName);\r\n                clearTimeout(this.timeout);\r\n                if(navElt.children) {\r\n                    this.timeout = setTimeout(Dropdown._openNested.bind(null, e.target), 500);\r\n                } else {\r\n                    this.timeout = setTimeout(Dropdown._closeRelated.bind(null, e.target), 500);\r\n                }\r\n            });\r\n\r\n            if(navElt.children) {\r\n                li.appendChild(this._createList(navElt.children, navElt.key));\r\n                li.classList.add(Dropdown._subnavClassName);\r\n            }\r\n\r\n            ul.appendChild(li);\r\n        });\r\n\r\n        return ul;\r\n    }\r\n\r\n    setDisabledState(key, disabled) {\r\n        const { li, navElt } = this._items[key];\r\n        navElt.disabled = disabled;\r\n        if(disabled) {\r\n            li.classList.add(Dropdown._disabledClassName);\r\n            li.classList.remove(Dropdown._openClassName);\r\n            li.classList.remove(Dropdown._activeClassName);\r\n\r\n            li.querySelectorAll(`.${Dropdown._openClassName}, .${Dropdown._activeClassName}`).forEach(elt => {\r\n                elt.classList.remove(Dropdown._openClassName); \r\n                elt.classList.remove(Dropdown._activeClassName);\r\n            });\r\n\r\n        } else {\r\n            li.classList.remove(Dropdown._disabledClassName);\r\n        }\r\n    }\r\n\r\n    _go(dirUp, active, open) {\r\n        const getNext = next => {\r\n            if(dirUp) {\r\n                return next.previousElementSibling;\r\n            } else {\r\n                return next.nextElementSibling;\r\n            }\r\n        };\r\n        if(active) {\r\n            active.classList.remove(Dropdown._activeClassName);\r\n        }\r\n        let next = (active && getNext(active)) || open.children[dirUp ? (open.children.length - 1) : 0];\r\n        while(next && next.classList.contains(Dropdown._disabledClassName)) {\r\n            next = getNext(next);\r\n        }\r\n        if(next) {\r\n            next.classList.add(Dropdown._activeClassName);\r\n        }\r\n        return next;\r\n    }\r\n\r\n    /**\r\n     * This is the keyboard navigation event handler\r\n     *\r\n     * @private\r\n     *\r\n     * @param {Event} e - The keyboard event that triggerd this handler\r\n     */\r\n    _keyboardNavigation(e) {\r\n        let open = this.ul.querySelectorAll(`.${Dropdown._openClassName} > ul`);\r\n        if(open.length > 0) {\r\n            open = open[open.length - 1];\r\n        } else {\r\n            open = this.ul;\r\n        }\r\n        let active = open.querySelector(`li.${Dropdown._activeClassName}`);\r\n        this.logger(open);\r\n\r\n        const key = `${e.keyCode}`;\r\n        if(this._keyboardHandlers.hasOwnProperty(key)) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            this._keyboardHandlers[key](active, open);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update all labels where we have a function that generates the labels instead of a string\r\n     *\r\n     * @private\r\n     */\r\n    _updateLabels() {\r\n        for(let key in this._items) {\r\n            if(this._items.hasOwnProperty(key)) {\r\n                const { navElt, li } = this._items[key];\r\n                if(typeof navElt.label === 'function') {\r\n                    li.innerText = navElt.label.call(this);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Public methods\r\n    /**\r\n     * Close a dropdown and remove all event listeners on it\r\n     */\r\n    dismiss() {\r\n        this.logger('dismiss');\r\n        this.ul.classList.remove(Dropdown._openClassName);\r\n        document.removeEventListener('keydown', this._keyboardNavigation);\r\n        document.removeEventListener('click', this.dismiss);\r\n\r\n        this.ul.querySelectorAll('li').forEach(subnav => {\r\n            subnav.classList.remove(Dropdown._openClassName);\r\n            subnav.classList.remove(Dropdown._activeClassName);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * This function will take an event and try to open and position the dropdown next to the mouse pointer or the\r\n     * element the event triggered on.\r\n     *\r\n     * @param {Event} evt     - The event that triggered this click\r\n     * @param {any} [context] - Optional context which is set on the Dropdown instance when we open it. This can be\r\n     *                          anything and is available through <code>this.context</code> on the action function\r\n     */\r\n    openClick(evt, context = undefined) {\r\n        this.logger(evt);\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        if(evt.clientX && evt.clientY) {\r\n            return this.open(window.pageXOffset + evt.clientX, window.pageYOffset + evt.clientY, true, context);\r\n        } \r\n\r\n        const rect = evt.target.getBoundingClientRect();\r\n        return this.open(window.pageXOffset + rect.right, window.pageYOffset + rect.bottom, true, context);\r\n    }\r\n\r\n    /**\r\n     * Open the dropdown rooted in the given position. It will expand down and to the right by default, but change\r\n     * expansion direction if it does not have enough space.\r\n     *\r\n     * @param {Number} left                  - How many pixels from the left the element should be positioned\r\n     * @param {Number} top                   - How many pixels from the top the element should be positioned\r\n     * @param {boolean} [autoExpandDir=true] - If true we will automatically expand the dropdown towards the top or\r\n     *                                         left if we don't have any space for it below or to the right. If false we\r\n     *                                         will only expand down and to the right.\r\n     * @param {any} [context]                - Optional context which is set on the Dropdown instance when we open it.\r\n     *                                         This can be anything and is available through <code>this.context</code>\r\n     *                                         on the action function\r\n     */\r\n    open(left, top, autoExpandDir = true, context = undefined) {\r\n        if(!this.domcontext.contains(this.ul)) {\r\n            this.domcontext.appendChild(this.ul);\r\n        }\r\n        this.context = context;\r\n        this._updateLabels();\r\n        this.ul.querySelectorAll(`.${Dropdown._openClassName},.${Dropdown._activeClassName}`).forEach(elt => {\r\n            elt.classList.remove(Dropdown._openClassName);\r\n            elt.classList.remove(Dropdown._activeClassName);\r\n        });\r\n        this.ul.classList.add(Dropdown._openClassName);\r\n\r\n        const rect = this.ul.getBoundingClientRect();\r\n        this.ul.style.left = `${left}px`;\r\n        this.ul.style.top = `${top}px`;\r\n        if(autoExpandDir) {\r\n            if((left + rect.width) >= (window.pageXOffset + window.innerWidth)) {\r\n                this.ul.style.left = `${left - rect.width}px`;\r\n            }\r\n            if((top + rect.height) >= (window.pageYOffset + window.innerHeight)) {\r\n                this.ul.style.top = `${top - rect.height}px`;\r\n            }\r\n        }\r\n\r\n        document.addEventListener('keydown', this._keyboardNavigation);\r\n        document.addEventListener('click', this.dismiss);\r\n\r\n        return this.ul;\r\n    }\r\n}\r\n\r\nexport default Dropdown;\r\n"],"file":"dropdown.js"}