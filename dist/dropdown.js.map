{"version":3,"sources":["dropdown.js"],"names":["Dropdown","open","active","_go","parentElement","ul","classList","remove","_activeClassName","_openClassName","add","_closeRelated","contains","_subnavClassName","_openNested","querySelector","click","dismiss","subnav","querySelectorAll","forEach","rect","getBoundingClientRect","ulRect","right","width","window","innerWidth","style","left","_nestedXPos","top","height","innerHeight","bottom","_nestedYPos","navList","options","bind","_keyboardNavigation","logger","console","log","_items","_createList","_baseClassName","context","document","body","appendChild","keyPrefix","createElement","addEventListener","key","e","target","getAttribute","li","navElt","disabled","label","preventDefault","stopPropagation","children","action","location","href","call","idx","hasOwnProperty","Error","setAttribute","divider","_disabledClassName","_dividerClassName","innerText","icon","backgroundImage","iconClass","span","className","insertBefore","firstChild","clearTimeout","timeout","setTimeout","elt","dirUp","getNext","next","previousElementSibling","nextElementSibling","length","keyCode","_keyboardHandlers","removeEventListener","evt","undefined","clientX","clientY","pageXOffset","pageYOffset","autoExpandDir","_updateLabels"],"mappings":"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","file":"dropdown.js","sourcesContent":["/**\r\n * Class representing a dropdown\r\n */\r\nclass Dropdown {\r\n    // General documentation of the types\r\n    /**\r\n     * @typedef {Object} Dropdown~NavDivider\r\n     * This is the structure of a navigation divider. It is just like the NavItem with no label or action.\r\n     * @property {string}  [key] - A unique key for this item. It will be auto generated if not supplied\r\n     */\r\n\r\n    /**\r\n     * @typedef {Object} Dropdown~NavItem\r\n     * This is the structure of a navigation item\r\n     * @property {string|function} label    - The label which is used in the menu. If it is a function it will be called\r\n     *                                        every time the menu is opened and set the label to the return value of\r\n     *                                        this function. The <code>this</code> object of the function is the\r\n     *                                        Dropdown instance itself unless otherwise bound.\r\n     * @property {string}  [icon]           - An icon to be used. This needs to be a path to a valid css\r\n     *                                        background-image string.\r\n     * @property {string}  [key]            - A unique key for this item. It will be auto generated if not supplied\r\n     * @property {boolean} [disabled=false] - If this is true the item is disabled. When disabled we will not navigate\r\n     *                                        according to the action parameter or run the action callback.\r\n     * @property {(string|Dropdown~actionCallback)} action - What to do when we select this nav item. If this is a\r\n     *                                                       string we will navigate like an &lt;a&gt; tag\r\n     */\r\n\r\n    /**\r\n     * @typedef {Object} Dropdown~NavMenu\r\n     * This is the structure of a navigation submenu\r\n     * @property {string} label             - The label which is used in the menu\r\n     * @property {string} [icon]            - An icon to be used. This needs to be a path to a valid css\r\n     *                                        background-image string.\r\n     * @property {string}  [key]            - A unique key for this item. It will be auto generated if not supplied\r\n     * @property {boolean} [disabled=false] - If this is true the item is disabled. When disabled it will not be\r\n     *                                        expanded\r\n     * @property {Array<Dropdown~NavItem|Dropdown~NavMenu|Dropdown~NavDivider>} children - The children of this menu\r\n     */\r\n\r\n    /**\r\n     * The action callback. The <code>this</code> context is the instance of the dropdown itself unless otherwise bound.\r\n     * @callback Dropdown~actionCallback\r\n     * @param {Event} event - This is the event (either click or keypress) which triggered this handler\r\n     */\r\n\r\n    /**\r\n     * @typedef {Object} Dropdown~Options\r\n     * This is the structure of the options object\r\n     * @property {Dropdown~logger} [logger=console.log] - The logger to use\r\n     * @property {Element} [element=document.body] - The element to attach the dropdown to\r\n     */\r\n\r\n    /**\r\n     * The logging function. Use this if you want to expose internal logging information.\r\n     * @callback Dropdown~logger\r\n     * @param {...*} logItems - This should work similarly to how <code>console.log</code> uses multiple parameters\r\n     */\r\n\r\n    // Private members\r\n    /**\r\n     * Base class name\r\n     *\r\n     * @private\r\n     */\r\n    static get _baseClassName() { return 'dropdown'; }\r\n\r\n    /**\r\n     * Class name of a subnav\r\n     *\r\n     * @private\r\n     */\r\n    static get _subnavClassName() { return 'subnav'; }\r\n\r\n    /**\r\n     * Class name of an open subnav\r\n     *\r\n     * @private\r\n     */\r\n    static get _openClassName() { return 'open';   }\r\n\r\n    /**\r\n     * Class name of a divider\r\n     *\r\n     * @private\r\n     */\r\n    static get _dividerClassName() { return 'divider';   }\r\n\r\n    /*\r\n     * Class name of an active item\r\n     *\r\n     * @private\r\n     */\r\n    static get _activeClassName() { return 'active'; }\r\n\r\n    /**\r\n     * Class name of a disabled item\r\n     *\r\n     * @private\r\n     */\r\n    static get _disabledClassName() { return 'disabled'; }\r\n\r\n    /**\r\n     * X-position (either positive or negative dependeing on space available) of a submenu. Relative to the parent item.\r\n     *\r\n     * @private\r\n     */\r\n    static get _nestedXPos() { return '95%';    }\r\n\r\n    /**\r\n     * Y-position (either positive or negative depending on space available) of a submenu. Relative to the parent item.\r\n     *\r\n     * @private\r\n     */\r\n    static get _nestedYPos() { return '-0.2em'; }\r\n\r\n    // Private static methods\r\n    /**\r\n     * A helper function to close all submenus on a given level.\r\n     *\r\n     * @private\r\n     *\r\n     * @param {Element} subnav - An element on the level we want to close all the open subnavs\r\n     */\r\n    static _closeRelated(subnav) {\r\n        subnav.parentElement.querySelectorAll(`.${Dropdown._openClassName}`).forEach(subnav => {\r\n            subnav.classList.remove(Dropdown._openClassName);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * A helper function to open a specific submenu\r\n     *\r\n     * @private\r\n     *\r\n     * @param {Element} subnav - The element of the subnav item we want to open\r\n     */\r\n    static _openNested(subnav) {\r\n        Dropdown._closeRelated(subnav);\r\n        subnav.classList.add(Dropdown._openClassName);\r\n        const ul = subnav.querySelector('ul');\r\n        const rect = subnav.getBoundingClientRect();\r\n        const ulRect = ul.getBoundingClientRect();\r\n\r\n        if((rect.right + ulRect.width) > window.innerWidth) {\r\n            ul.style.left = '';\r\n            ul.style.right = Dropdown._nestedXPos;\r\n        } else {\r\n            ul.style.right = '';\r\n            ul.style.left = Dropdown._nestedXPos;\r\n        }\r\n        if((rect.top + ulRect.height) > window.innerHeight) {\r\n            ul.style.top = '';\r\n            ul.style.bottom = Dropdown._nestedYPos;\r\n        } else {\r\n            ul.style.bottom = '';\r\n            ul.style.top = Dropdown._nestedYPos;\r\n        }\r\n    }\r\n\r\n    get _keyboardHandlers() {\r\n        return {\r\n            // up arrow\r\n            '38': (open, active) => this._go(true, open, active), \r\n\r\n            // down arrow\r\n            '40': (open, active) => this._go(false, open, active),\r\n\r\n            // left arrow\r\n            '37': (active, open) => {\r\n                if(active && active.parentElement !== this.ul && active.parentElement.parentElement !== this.ul) {\r\n                    active.classList.remove(Dropdown._activeClassName);\r\n                    active.parentElement.parentElement.classList.remove(Dropdown._openClassName);\r\n                    active.parentElement.parentElement.classList.add(Dropdown._activeClassName);\r\n                } else if(open && open !== this.ul) {\r\n                    Dropdown._closeRelated(open.parentElement);\r\n                }\r\n            },\r\n\r\n            // right arrow\r\n            '39': active => {\r\n                if(active && active.classList.contains(Dropdown._subnavClassName)) {\r\n                    Dropdown._openNested(active);\r\n                    active.querySelector('li').classList.add(Dropdown._activeClassName);\r\n                }\r\n            },\r\n\r\n            // enter\r\n            '13': active => active && active.click(), \r\n\r\n            // escape\r\n            '27': this.dismiss, \r\n        };\r\n    }\r\n\r\n\r\n    /**\r\n     * @constructor\r\n     * @param {Array<Dropdown~NavItem|Dropdown~NavMenu|Dropdown~NavDivider>} navList - Object representation of the context menu.\r\n     * @param {Dropdown~Options} options - Optional parameters for this instance\r\n     */\r\n    constructor(navList, options = {}) { \r\n        this.dismiss = this.dismiss.bind(this);\r\n        this._keyboardNavigation = this._keyboardNavigation.bind(this);\r\n        \r\n        this.logger = options.logger ? options.logger : console.log.bind(console); // eslint-disable-line no-console\r\n        this.navList = navList;\r\n\r\n        this._items = {};\r\n        this.ul = this._createList(navList, 'item');\r\n        this.ul.classList.add(Dropdown._baseClassName);\r\n\r\n        (options.context ? options.context : document.body).appendChild(this.ul);\r\n    }\r\n\r\n    /**\r\n     * A helper function to create the dom structure of the dropdown\r\n     *\r\n     * @private \r\n     *\r\n     * @param navList {Array<Dropdown~NavItem|Dropdown~NavMenu|Dropdown~NavDivider>} The object representation of the context menu\r\n     */\r\n    _createList(navList, keyPrefix) {\r\n        const ul = document.createElement('ul');\r\n\r\n        ul.addEventListener('click', e => {\r\n            const key = e.target.getAttribute('data-key');\r\n            if(!key || !this._items[key]) {\r\n                return;\r\n            }\r\n            const {li, navElt} = this._items[key];\r\n\r\n            if(navElt.disabled || !navElt.label) {\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n                return;\r\n            }\r\n\r\n            if(navElt.children) {\r\n                Dropdown._openNested(li);\r\n                e.preventDefault();\r\n                e.stopPropagation();\r\n            } else if(typeof(navElt.action) === 'string') {\r\n                window.location.href = navElt.action;\r\n            } else if(typeof(navElt.action) === 'function') {\r\n                navElt.action.call(this, e);\r\n            }\r\n        });\r\n\r\n        navList.forEach((navElt, idx) => {\r\n            const li = document.createElement('li');\r\n\r\n            navElt.key = navElt.key ? navElt.key : `${keyPrefix}-${idx}`;\r\n            if(this._items.hasOwnProperty(navElt.key)) {\r\n                throw new Error('Got duplicate key');\r\n            } else {\r\n                this._items[navElt.key] = { navElt, li };\r\n            }\r\n            li.setAttribute('data-key', navElt.key);\r\n\r\n            const divider = typeof navElt.label === 'undefined';\r\n            if(navElt.disabled || divider) {\r\n                li.classList.add(Dropdown._disabledClassName);\r\n            }\r\n            if(divider) { // divider\r\n                li.classList.add(Dropdown._dividerClassName);\r\n            } else if(typeof navElt.label === 'function') {\r\n                li.innerText = navElt.label.call(this);\r\n            } else {\r\n                li.innerText = navElt.label;\r\n            }\r\n\r\n            if(navElt.icon) {\r\n                li.style.backgroundImage = navElt.icon;\r\n            } else if(navElt.iconClass) {\r\n                const span = document.createElement('span');\r\n                span.className = `${navElt.iconClass} icon`;\r\n                li.insertBefore(span, li.firstChild);\r\n            }\r\n\r\n            li.addEventListener('mouseleave', e => {\r\n                this.logger('mouseleave', e);\r\n                clearTimeout(this.timeout);\r\n\r\n                e.target.classList.remove(Dropdown._activeClassName);\r\n            });\r\n            li.addEventListener('mouseenter', e => {\r\n                this.logger('mouseenter', e);\r\n                clearTimeout(this.timeout);\r\n\r\n                if(navElt.disabled || divider) {\r\n                    this.timeout = setTimeout(Dropdown._closeRelated.bind(null, e.target), 500);\r\n                    return;\r\n                }\r\n\r\n                e.target.classList.add(Dropdown._activeClassName);\r\n                clearTimeout(this.timeout);\r\n                if(navElt.children) {\r\n                    this.timeout = setTimeout(Dropdown._openNested.bind(null, e.target), 500);\r\n                } else {\r\n                    this.timeout = setTimeout(Dropdown._closeRelated.bind(null, e.target), 500);\r\n                }\r\n            });\r\n\r\n            if(navElt.children) {\r\n                li.appendChild(this._createList(navElt.children, navElt.key));\r\n                li.classList.add(Dropdown._subnavClassName);\r\n            }\r\n\r\n            ul.appendChild(li);\r\n        });\r\n\r\n        return ul;\r\n    }\r\n\r\n    setDisabledState(key, disabled) {\r\n        const { li, navElt } = this._items[key];\r\n        navElt.disabled = disabled;\r\n        if(disabled) {\r\n            li.classList.add(Dropdown._disabledClassName);\r\n            li.classList.remove(Dropdown._openClassName);\r\n            li.classList.remove(Dropdown._activeClassName);\r\n\r\n            li.querySelectorAll(`.${Dropdown._openClassName}, .${Dropdown._activeClassName}`).forEach(elt => {\r\n                elt.classList.remove(Dropdown._openClassName); \r\n                elt.classList.remove(Dropdown._activeClassName);\r\n            });\r\n\r\n        } else {\r\n            li.classList.remove(Dropdown._disabledClassName);\r\n        }\r\n    }\r\n\r\n    _go(dirUp, active, open) {\r\n        const getNext = next => {\r\n            if(dirUp) {\r\n                return next.previousElementSibling;\r\n            } else {\r\n                return next.nextElementSibling;\r\n            }\r\n        };\r\n        if(active) {\r\n            active.classList.remove(Dropdown._activeClassName);\r\n        }\r\n        let next = (active && getNext(active)) || open.children[dirUp ? (open.children.length - 1) : 0];\r\n        while(next && next.classList.contains(Dropdown._disabledClassName)) {\r\n            next = getNext(next);\r\n        }\r\n        if(next) {\r\n            next.classList.add(Dropdown._activeClassName);\r\n        }\r\n        return next;\r\n    }\r\n\r\n    /**\r\n     * This is the keyboard navigation event handler\r\n     *\r\n     * @private\r\n     *\r\n     * @param {Event} e - The keyboard event that triggerd this handler\r\n     */\r\n    _keyboardNavigation(e) {\r\n        let open = this.ul.querySelectorAll(`.${Dropdown._openClassName} > ul`);\r\n        if(open.length > 0) {\r\n            open = open[open.length - 1];\r\n        } else {\r\n            open = this.ul;\r\n        }\r\n        let active = open.querySelector(`li.${Dropdown._activeClassName}`);\r\n        this.logger(open);\r\n\r\n        const key = `${e.keyCode}`;\r\n        if(this._keyboardHandlers.hasOwnProperty(key)) {\r\n            e.stopPropagation();\r\n            e.preventDefault();\r\n            this._keyboardHandlers[key](active, open);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * Update all labels where we have a function that generates the labels instead of a string\r\n     *\r\n     * @private\r\n     */\r\n    _updateLabels() {\r\n        for(let key in this._items) {\r\n            if(this._items.hasOwnProperty(key)) {\r\n                const { navElt, li } = this._items[key];\r\n                if(typeof navElt.label === 'function') {\r\n                    li.innerText = navElt.label.call(this);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    // Public methods\r\n    /**\r\n     * Close a dropdown and remove all event listeners on it\r\n     */\r\n    dismiss() {\r\n        this.logger('dismiss');\r\n        this.ul.classList.remove(Dropdown._openClassName);\r\n        document.removeEventListener('keydown', this._keyboardNavigation);\r\n        document.removeEventListener('click', this.dismiss);\r\n\r\n        this.ul.querySelectorAll('li').forEach(subnav => {\r\n            subnav.classList.remove(Dropdown._openClassName);\r\n            subnav.classList.remove(Dropdown._activeClassName);\r\n        });\r\n    }\r\n\r\n    /**\r\n     * This function will take an event and try to open and position the dropdown next to the mouse pointer or the\r\n     * element the event triggered on.\r\n     *\r\n     * @param {Event} evt     - The event that triggered this click\r\n     * @param {any} [context] - Optional context which is set on the Dropdown instance when we open it. This can be\r\n     *                          anything and is available through <code>this.context</code> on the action function\r\n     */\r\n    openClick(evt, context = undefined) {\r\n        this.logger(evt);\r\n        evt.stopPropagation();\r\n        evt.preventDefault();\r\n        if(evt.clientX && evt.clientY) {\r\n            return this.open(window.pageXOffset + evt.clientX, window.pageYOffset + evt.clientY, true, context);\r\n        } \r\n\r\n        const rect = evt.target.getBoundingClientRect();\r\n        return this.open(window.pageXOffset + rect.right, window.pageYOffset + rect.bottom, true, context);\r\n    }\r\n\r\n    /**\r\n     * Open the dropdown rooted in the given position. It will expand down and to the right by default, but change\r\n     * expansion direction if it does not have enough space.\r\n     *\r\n     * @param {Number} left                  - How many pixels from the left the element should be positioned\r\n     * @param {Number} top                   - How many pixels from the top the element should be positioned\r\n     * @param {boolean} [autoExpandDir=true] - If true we will automatically expand the dropdown towards the top or\r\n     *                                         left if we don't have any space for it below or to the right. If false we\r\n     *                                         will only expand down and to the right.\r\n     * @param {any} [context]                - Optional context which is set on the Dropdown instance when we open it.\r\n     *                                         This can be anything and is available through <code>this.context</code>\r\n     *                                         on the action function\r\n     */\r\n    open(left, top, autoExpandDir = true, context = undefined) {\r\n        this.context = context;\r\n        this._updateLabels();\r\n        this.ul.querySelectorAll(`.${Dropdown._openClassName},.${Dropdown._activeClassName}`).forEach(elt => {\r\n            elt.classList.remove(Dropdown._openClassName);\r\n            elt.classList.remove(Dropdown._activeClassName);\r\n        });\r\n        this.ul.classList.add(Dropdown._openClassName);\r\n\r\n        const rect = this.ul.getBoundingClientRect();\r\n        this.ul.style.left = `${left}px`;\r\n        this.ul.style.top = `${top}px`;\r\n        if(autoExpandDir) {\r\n            if((left + rect.width) >= (window.pageXOffset + window.innerWidth)) {\r\n                this.ul.style.left = `${left - rect.width}px`;\r\n            }\r\n            if((top + rect.height) >= (window.pageYOffset + window.innerHeight)) {\r\n                this.ul.style.top = `${top - rect.height}px`;\r\n            }\r\n        }\r\n\r\n        document.addEventListener('keydown', this._keyboardNavigation);\r\n        document.addEventListener('click', this.dismiss);\r\n\r\n        return this.ul;\r\n    }\r\n}\r\n\r\nexport default Dropdown;\r\n"]}